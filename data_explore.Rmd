---
title: "Exploration"
author: "Mariah Loehr"
date: "2024-06-10"
output: pdf_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE, message=FALSE}
knitr::opts_chunk$set(echo = TRUE, results = 'hide')
library(tidyverse)
library(plotly)
library(ggtree)
library(packcircles)

taxon <- read.delim("taxon.txt")
metadata <- read.delim("metadata.txt")
```

```{r filter for specific id}
id = "01"
taxon_id <- taxon %>%
  select(id = id)

#pivot longer and then combine taxon and metadata by id
#create new data set or just select id?
#should make ID a column in taxon, possible ?
#three column data frame: id, bacteria, percentage, easy to merge with metadata
```

```{r donut chart}
donut <- ggplot(taxon_id, aes(ymax=ymax, ymin=ymin, xmax = 4, xmin=3, fill = category)) +
  geom_rect() +
  coord_polar(theta = "y") +
  xlim(c(2,4)) +
  theme_void()
  
ggplotly(donut, tooltip = "text")
```

```{r bar chart}
bar <- ggplot(taxon_id) +
  
```

```{r bubble chart}
packing <- circleProgressiveLayout(taxon_id, sizetype = 'area')

data = cbind(taxon_id, packing)

dat.gg <- circleLayoutVertices(packing, npoints = 50)

bubble <- ggplot() +
  geom_polygon(data = dat.gg, aes(x, y, group = id, fill = as.factor(id)), color = "black", alpha = 0.6) +
  scale_size_continuous(range = c(1,4)) +
  theme_void() +
  theme(legend.position = "none") +
  coord_equal()

ggplotly(bubble)
```

```{r ggtree}
something <- system.file()
tree <- read.tree(something)

ggtree(tree, aes(color=group), layout = 'circular') + 
  geom_tiplab(size = 1, aes(angle = angle))
```

```{r shiny table}

```

```{r}

```



